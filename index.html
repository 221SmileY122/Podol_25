<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ü–æ–¥–æ–ª–µ—Ü–∫–æ–π</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

    <div class="loading-screen">
        <img src="logo.png" alt="–õ–æ–≥–æ—Ç–∏–ø" class="logo">
        <div class="progress-bar-container">
            <div class="progress-bar"></div>
        </div>
        <p class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
    </div>

    <header>
        <nav>
            <button class="nav-button" data-action="iq_test">IQ –∏ –≤–æ–∑–±—É–∂–¥–µ–Ω–Ω–æ—Å—Ç—å</button>
            <button class="nav-button" data-action="AUX">–¢–µ—Å—Ç –ü–æ–¥–æ–ª–µ—Ü–∫–æ–π</button>
            <button class="nav-button" data-action="show_random_iq">–£–∑–Ω–∞—Ç—å —Å–≤–æ–π –Ω–∞—Å—Ç–æ—è—â–∏–π IQ —Å–µ–≥–æ–¥–Ω—è</button>
            <button class="nav-button" data-action="write_to_podoletskaya">–ù–∞–ø–∏—Å–∞—Ç—å –ü–æ–¥–æ–ª–µ—Ü–∫–æ–π</button>
        </nav>
        <button class="get-started-button">Get Started</button>
    </header>

    <main>
        <div class="left-frame">
            <div class="text-box">
                <p>–î–∞–Ω–Ω—ã–π —Ç–µ—Å—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –ª–∏—Ü —Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—à–µ 18 –ª–µ—Ç –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –≤—Å–µ–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –ü–æ–¥–æ–ª–µ—Ü–∫–æ-–Ω–æ–º–µ—Ç—Ä–∞, –∞ –∏–º–µ–Ω–Ω–æ:
                    1) 18 –ª–µ—Ç
                    2) –í—ã –¥—É—Ä–µ–µ—Ç–µ –æ—Ç –ü–æ–¥–æ–ª–µ—Ü–∫–æ–π
                    3) –í–∞–º –Ω–µ –∂–∞–ª–∫–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ –≤—Ä–µ–º—è —Å –ü–æ–¥–æ–ª–µ—Ü–∫–æ–π –≤ –¥—É—à–µ</p>
            </div>
            <div class="button-container">
                <button class="main-button" data-action="iq_test">IQ –∏ –≤–æ–∑–±—É–∂–¥–µ–Ω–Ω–æ—Å—Ç—å</button>
                <button class="main-button" data-action="AUX">–¢–µ—Å—Ç –ü–æ–¥–æ–ª–µ—Ü–∫–æ–π</button>
            </div>
        </div>

        <div class="right-frame">
            <h2>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏:</h2>
            <ul class="options-list">
                <li><button class="option-button" data-action="show_random_iq">–£–∑–Ω–∞—Ç—å —Å–≤–æ–π –Ω–∞—Å—Ç–æ—è—â–∏–π IQ —Å–µ–≥–æ–¥–Ω—è</button></li>
                <li><button class="option-button" data-action="write_to_podoletskaya">–ù–∞–ø–∏—Å–∞—Ç—å –ü–æ–¥–æ–ª–µ—Ü–∫–æ–π</button></li>
                <li><button class="option-button" data-action="open_chat_with_podoletskaya">–ß–∞—Ç —Å –ü–æ–¥–æ–ª–µ—Ü–∫–æ–π</button></li>
                <li><button class="option-button" data-action="mini_game">–ú–∏–Ω–∏-–∏–≥—Ä–∞: –ù–∞–π–¥–∏ –ü–æ–¥–æ–ª–µ—Ü–∫—É—é</button></li>
                <li><button class="option-button" data-action="open_fandom">–û—Ç–∫—Ä—ã—Ç—å Fandom</button></li>
                <li><button class="option-button" data-action="toggle_music">–í–∫–ª—é—á–∏—Ç—å/–í—ã–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É</button></li>
            </ul>
        </div>
    </main>

    <div class="background-animation"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Loading screen
            const loadingScreen = document.querySelector('.loading-screen');
            const progressBar = document.querySelector('.progress-bar');
            const loadingText = document.querySelector('.loading-text');

            let progress = 0;
            const interval = setInterval(() => {
                progress += 1;
                progressBar.style.width = `${progress}%`;
                loadingText.innerText = `–ó–∞–≥—Ä—É–∑–∫–∞... ${progress}%`;

                if (progress >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        loadingScreen.style.display = 'none';
                        document.body.style.overflow = 'auto'; // Restore scrollbars
                    }, 500);
                }
            }, 30); // Adjust the interval to control the loading speed

            // Function to open a popup window
            function openPopupWindow(content) {
                const popupWindow = document.createElement('div');
                popupWindow.classList.add('popup-window');
                popupWindow.innerHTML = `
                    <h2>${content.title}</h2>
                    ${content.body}
                    <button class="close-button">–ó–∞–∫—Ä—ã—Ç—å</button>
                `;
                document.body.appendChild(popupWindow);

                const closeButton = popupWindow.querySelector('.close-button');
                closeButton.addEventListener('click', () => {
                    popupWindow.remove();
                });
            }

            // Event listeners for buttons
            document.querySelectorAll('.nav-button, .main-button, .option-button').forEach(button => {
                button.addEventListener('click', function() {
                    const action = this.dataset.action;

                    switch (action) {
                        case 'iq_test':
                            openPopupWindow({
                                title: 'IQ –∏ –≤–æ–∑–±—É–∂–¥–µ–Ω–Ω–æ—Å—Ç—å',
                                body: `
                                    <label>–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∞—à–µ–≥–æ IQ —Å–µ–≥–æ–¥–Ω—è:</label>
                                    <input type="number" id="iq_value"><br>
                                    <label>–í–≤–µ–¥–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å –≤–∞—à–µ–π –≤–æ–∑–±—É–∂–¥–µ–Ω–Ω–æ—Å—Ç–∏ —Å–µ–≥–æ–¥–Ω—è –≤ %:</label>
                                    <input type="number" id="excitement_level"><br>
                                    <button onclick="calculateIQ()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
                                `
                            });
                            break;
                        case 'AUX':
                            openPopupWindow({
                                title: '–¢–µ—Å—Ç –ü–æ–¥–æ–ª–µ—Ü–∫–æ–π',
                                body: `
                                    <label>–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –∂–µ–ª–∞–Ω–Ω—ã–π IQ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–µ—Å—Ç–∞ –ü–æ–¥–æ–ª–µ—Ü–∫–æ–π:</label>
                                    <input type="number" id="desired_iq"><br>
                                    <button onclick="startQuiz()">–ù–∞—á–∞—Ç—å</button>
                                `
                            });
                            break;
                        case 'show_random_iq':
                            getRandomIQ();
                            break;
                        case 'write_to_podoletskaya':
                            writeToPodoletskaya();
                            break;
                        case 'open_chat_with_podoletskaya':
                            openChatWithPodoletskaya();
                            break;
                        case 'mini_game':
                            // Placeholder for mini_game functionality
                            alert('–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å "–ú–∏–Ω–∏-–∏–≥—Ä–∞: –ù–∞–π–¥–∏ –ü–æ–¥–æ–ª–µ—Ü–∫—É—é"');
                            break;
                        case 'open_fandom':
                            window.open('https://www.fandom.com', '_blank');
                            break;
                        case 'toggle_music':
                            // Placeholder for toggle_music functionality
                            alert('–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å "–í–∫–ª—é—á–∏—Ç—å/–í—ã–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É"');
                            break;
                        default:
                            alert('–î–µ–π—Å—Ç–≤–∏–µ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ');
                    }
                });
            });

            window.calculateIQ = function() {
                const iqValue = document.getElementById('iq_value').value;
                const excitementLevel = document.getElementById('excitement_level').value;

                fetch('/calculate_iq', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `iq_value=${iqValue}&excitement_level=${excitementLevel}`
                })
                .then(response => response.json())
                .then(data => {
                    alert(data.result);
                });
            };

            window.startQuiz = function() {
                const desiredIQ = document.getElementById('desired_iq').value;

                fetch('/start_quiz', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded',
                    },
                    body: `desired_iq=${desiredIQ}`
                })
                .then(response => response.json())
                .then(data => {
                    if (data.quiz) {
                        alert('–ù–∞—á–∞—Ç—å –≤–∏–∫—Ç–æ—Ä–∏–Ω—É');
                    } else {
                        alert('IQ —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–π');
                    }
                });
            };

            function getRandomIQ() {
                const name = prompt("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è:");
                fetch(`/show_random_iq?name=${name}`)
                    .then(response => response.json())
                    .then(data => {
                        alert(`${data.name}, –≤–∞—à IQ —Å–µ–≥–æ–¥–Ω—è: ${data.iq} üß†\n–ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å!`);
                    });
            }

            function writeToPodoletskaya() {
                fetch('/write_to_podoletskaya')
                    .then(response => response.json())
                    .then(data => {
                        alert(data.message);
                    });
            }

            function openChatWithPodoletskaya() {
                const userMessage = prompt("–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:");
                if (userMessage) {
                    fetch('/chat_with_podoletskaya', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/x-www-form-urlencoded',
                        },
                        body: `user_message=${userMessage}`
                    })
                    .then(response => response.json())
                    .then(data => {
                        alert(`–í—ã: ${data.user_message}\n–ü–æ–¥–æ–ª–µ—Ü–∫–∞—è: ${data.podoletskaya_response}`);
                    });
                }
            }
        });
    </script>
</body>
</html>
